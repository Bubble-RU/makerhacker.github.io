<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<title>8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</title>
</head>

<body>
<p><a title="nathan_marz_storm" href="../nathan_marz_storm_home.html">nathan_marz_storm</a> <a title="nathan_marz_storm-2010" href="../home/nathan_marz_storm-2010_home.html">nathan_marz_storm-2010</a> <a title="nathan_marz_storm-2010-8" href="#">nathan_marz_storm-2010-8</a> knowledge-graph by maker-knowledge-mining</p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- maker adsense -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-5027806277543591"
     data-ad-slot="4192012269"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</h1>
<br/><h2>meta infos for this blog</h2><p>Source: <a title="nathan_marz_storm-2010-8-html" href="http://nathanmarz.com//blog/follow-up-to-the-mathematics-behind-hadoop-based-systems.html">html</a></p><p>Introduction: In aprevious post, I developed an equation modeling the stable runtime of an
iterative, batch-oriented workflow. We saw how the equation explained a number
of counter-intuitive behaviors of batch-oriented systems. In this post, we
will learn how to measure the amount of overhead versus dynamic time in a
workflow, which is the first step in applying the theory to optimize a
workflow.Recall that we started with the equation for the runtime of a single
iteration of a workflow:Runtime = Overhead + {Time to process one hour of
data} * {Hours of Data}T = O + P * HWe ended with the equation for the stable
runtime of a workflow that runs repeatedly:{Stable Runtime} = Overhead / (1 -
{Time to process one hour of data}T = O / (1 - P)Measuring O and PThe first
step towards utilizing this theory for optimizing your workflow will be to
measure the values of O and P for your workflow. This can be difficult if the
cluster is shared with lots of other jobs, as the P for each run will vary.
Let's start</p><br/><h2>Summary: the most important sentenses genereted by tfidf model</h2><p>sentIndex sentText sentNum sentScore</p><p>1 In aprevious post, I developed an equation modeling the stable runtime of an iterative, batch-oriented workflow. [sent-1, score-0.742]
</p><p>2 We saw how the equation explained a number of counter-intuitive behaviors of batch-oriented systems. [sent-2, score-0.211]
</p><p>3 In this post, we will learn how to measure the amount of overhead versus dynamic time in a workflow, which is the first step in applying the theory to optimize a workflow. [sent-3, score-0.679]
</p><p>4 This can be difficult if the cluster is shared with lots of other jobs, as the P for each run will vary. [sent-5, score-0.242]
</p><p>5 Let's start with the case where your workflow is the only application on the cluster. [sent-6, score-0.458]
</p><p>6 A flawed first attempt at measurementOne idea for measuring O and P would be to run the workflow without any data. [sent-7, score-0.802]
</p><p>7 Using the equation for the runtime of asingle runof the workflow, we can do the following math:T = O + P * HT = O + P * zeroO = TRunning without any data sets H to zero, which gives us the value of O and lets us trivially determine P. [sent-8, score-0.907]
</p><p>8 Normally, a Hadoop job has more tasks than exist task slots on the cluster. [sent-10, score-0.216]
</p><p>9 It can take a few minutes for a job to "get going" and achieve full velocity by utilizing all the available task slots on the cluster. [sent-11, score-0.353]
</p><p>10 The time it takes to "get going" is normally a constant amount of time and so is captured by our O variable. [sent-12, score-0.213]
</p><p>11 When we run a job with a tiny amount of data, the job will finish before utilizing the whole cluster, skewing our measurement of O. [sent-13, score-0.81]
</p><p>12 Better way to measure O and PSince we have two variables and can't zero out the equation, we are going to need two measurements of O and P to be able to solve for them. [sent-14, score-0.468]
</p><p>13 We already know that each measurement has to be done with a significant amount of data so as to avoid skewing the measurement. [sent-15, score-0.451]
</p><p>14 By adding a "sleep(1 hour)" call in the beginning of the workflow, we effectively increase O by one hour. [sent-17, score-0.194]
</p><p>15 With this insight, we can utilize the following procedure to get an approximate measurement of O and P:Run workflow repeatedly until runtime stabilizes. [sent-18, score-1.236]
</p><p>16 This gives us our first measurement T1 = O / (1 - P)Add a "sleep(1 hour") call in the beginning of the workflow. [sent-19, score-0.52]
</p><p>17 This gives us our second measurement T2 = (O + 1) / (1 - P)Solve the two equations for O and P. [sent-21, score-0.463]
</p><p>18 Unless the utilization of the cluster by other jobs is constant, your P value will fluctuate from iteration to iteration causing difficulties in measuring O and P. [sent-24, score-0.699]
</p><p>19 What I recommend in this scenario is to measure theaverage runtimeof the workflow over many iterations before and after increasing O with "sleep(1 hour)". [sent-25, score-0.774]
</p><p>20 SummaryNow you should be able to measure the values of O and P for your workflow. [sent-27, score-0.324]
</p>
<br/>
<h2>similar blogs computed by tfidf model</h2><h3>tfidf for this blog:</h3><p>wordName wordTfidf (topN-words)</p>
<p>[('workflow', 0.458), ('runtime', 0.366), ('measure', 0.237), ('sleep', 0.237), ('measurement', 0.229), ('equation', 0.211), ('hour', 0.211), ('overhead', 0.183), ('measuring', 0.183), ('jobs', 0.145), ('utilizing', 0.137), ('repeatedly', 0.137), ('cluster', 0.127), ('stable', 0.119), ('run', 0.115), ('iteration', 0.096), ('equations', 0.091), ('measurements', 0.091), ('skewing', 0.091), ('slots', 0.091), ('zero', 0.091), ('values', 0.087), ('beginning', 0.079), ('scenario', 0.079), ('normally', 0.079), ('theory', 0.079), ('us', 0.074), ('amount', 0.07), ('call', 0.069), ('gives', 0.069), ('hours', 0.064), ('constant', 0.064), ('task', 0.064), ('step', 0.064), ('job', 0.061), ('data', 0.061), ('value', 0.052), ('solve', 0.049), ('attempt', 0.046), ('although', 0.046), ('applying', 0.046), ('approximate', 0.046), ('effectively', 0.046), ('ended', 0.046), ('finish', 0.046), ('insight', 0.046), ('iterative', 0.046), ('math', 0.046), ('modeling', 0.046), ('modify', 0.046)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 0.99999988 <a title="8-tfidf-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>Introduction: In aprevious post, I developed an equation modeling the stable runtime of an
iterative, batch-oriented workflow. We saw how the equation explained a number
of counter-intuitive behaviors of batch-oriented systems. In this post, we
will learn how to measure the amount of overhead versus dynamic time in a
workflow, which is the first step in applying the theory to optimize a
workflow.Recall that we started with the equation for the runtime of a single
iteration of a workflow:Runtime = Overhead + {Time to process one hour of
data} * {Hours of Data}T = O + P * HWe ended with the equation for the stable
runtime of a workflow that runs repeatedly:{Stable Runtime} = Overhead / (1 -
{Time to process one hour of data}T = O / (1 - P)Measuring O and PThe first
step towards utilizing this theory for optimizing your workflow will be to
measure the values of O and P for your workflow. This can be difficult if the
cluster is shared with lots of other jobs, as the P for each run will vary.
Let's start</p><p>2 0.61693031 <a title="8-tfidf-2" href="../nathan_marz_storm-2009/nathan_marz_storm-2009-12-28-The_mathematics_behind_Hadoop-based_systems.html">1 nathan marz storm-2009-12-28-The mathematics behind Hadoop-based systems</a></p>
<p>Introduction: I wish I had known this a year ago. Now, with some simple mathematics I can
finally answer:Why doesn't the speed of my workflow double when I double the
amount of processing power?Why does a 10% failure rate cause my runtime to go
up by 300%?How does optimizing out 30% of my workflow runtime cause the
runtime to decrease by 80%?How many machines should I have in my cluster to be
adequately performant and fault-tolerant?All of these questions are neatly
answered by one simple equation:Runtime = Overhead / (1 - {Time to process one
hour of data})We will derive this equation in a moment. First, let's briefly
discuss what I mean by "Hadoop-based system."1A common use-case of Hadoop is
running a workflow that processes a continuous stream of incoming data. The
workflow runs in a "while(true)" loop, and each iteration of the workflow
processes the data that accumulated since last iteration.The inspiration for
the following analysis can be summarized in a simple example. Let's say you
have a</p><p>3 0.077313505 <a title="8-tfidf-3" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>Introduction: The CAP theorem states a database cannot guarantee consistency, availability,
and partition-tolerance at the same time. But you can't sacrifice partition-
tolerance (seehereandhere), so you must make a tradeoff between availability
and consistency. Managing this tradeoff is a central focus of the NoSQL
movement.Consistency means that after you do a successful write, future reads
will always take that write into account. Availability means that you can
always read and write to the system. During a partition, you can only have one
of these properties.Systems that choose consistency over availability have to
deal with some awkward issues. What do you do when the database isn't
available? You can try buffering writes for later, but you risk losing those
writes if you lose the machine with the buffer. Also, buffering writes can be
a form of inconsistency because a client thinks a write has succeeded but the
write isn't in the database yet. Alternatively, you can return errors back to
the cl</p><p>4 0.055769514 <a title="8-tfidf-4" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>Introduction: I'm the first employee ofBackType, a Summer '08 YC company. My joining the
company increased the company size by 50%. The experience has been awesome,
but I will say up front that being the first employee of a startup is not for
everyone.The best part of being the first employee of a startup is the total
exposure to all parts of the company. I've learned a ton about product
development, customer development, recruiting, and entrepreneurship.
Additionally, I've met and connected with lots of other awesome people through
the YC network. I've gotten all these benefits at relatively low risk for
myself, as I still have a salary and a solid chunk of equity.No RulesThere are
a lot of rules working at most companies. You don't even realize that some of
the rulesarerules until you work at a company with no rules. I'm talking about
the most basic things like what hours you work, what days of the week you
work, what tools you use, and whether you come into the office or not.Because
there are no</p><p>5 0.052454568 <a title="8-tfidf-5" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>Introduction: I wasrecently interviewedfor "Programmer Magazine", a Chinese magazine. The
interview was published in Chinese, but a lot of people told me they'd like to
see the English version of the interview. Due to the Google translation being,
ahem, a little iffy, I decided to just publish the original English version on
my blog. Hope you enjoy!What drew you to programming and what was the first
interesting program you wrote?I started programming when I was 10 years old on
my TI-82 graphing calculator. Initially I started programming because I wanted
to make games on my calculator – and also because I was bored in math class
:D. The first interesting game I made on my calculator was an archery game
where you'd shoot arrows at moving targets. You'd get points for hitting more
targets or completing all the targets faster. A couple years later I graduated
to programming the TI-89 which was a huge upgrade in power. I remember how the
TI-82 only let you have 26 variables (for the characters 'a' throu</p><p>6 0.041688707 <a title="8-tfidf-6" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-14-Introducing_Cascalog%3A_a_Clojure-based_query_language_for_Hadoop.html">13 nathan marz storm-2010-04-14-Introducing Cascalog: a Clojure-based query language for Hadoop</a></p>
<p>7 0.039032854 <a title="8-tfidf-7" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-03-Tips_for_Optimizing_Cascading_Flows.html">2 nathan marz storm-2010-01-03-Tips for Optimizing Cascading Flows</a></p>
<p>8 0.038744032 <a title="8-tfidf-8" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>9 0.038125921 <a title="8-tfidf-9" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-08-News_Feed_in_38_lines_of_code_using_Cascalog.html">16 nathan marz storm-2010-05-08-News Feed in 38 lines of code using Cascalog</a></p>
<p>10 0.036783092 <a title="8-tfidf-10" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-08-20-5_Tips_for_Thinking_Under_Uncertainty.html">21 nathan marz storm-2010-08-20-5 Tips for Thinking Under Uncertainty</a></p>
<p>11 0.034430567 <a title="8-tfidf-11" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>12 0.03285481 <a title="8-tfidf-12" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-26-My_conversation_with_the_great_John_McCarthy.html">4 nathan marz storm-2010-01-26-My conversation with the great John McCarthy</a></p>
<p>13 0.03151321 <a title="8-tfidf-13" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-12-Break_into_Silicon_Valley_with_a_blog.html">38 nathan marz storm-2013-04-12-Break into Silicon Valley with a blog</a></p>
<p>14 0.031255979 <a title="8-tfidf-14" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-27-New_Cascalog_features%3A_outer_joins%2C_combiners%2C_sorting%2C_and_more.html">14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</a></p>
<p>15 0.030514915 <a title="8-tfidf-15" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>16 0.029193899 <a title="8-tfidf-16" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-05-How_to_get_a_job_at_a_kick-ass_startup_%28for_programmers%29.html">22 nathan marz storm-2010-10-05-How to get a job at a kick-ass startup (for programmers)</a></p>
<p>17 0.027751314 <a title="8-tfidf-17" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-27-Fastest_Viable_Product%3A_Investing_in_Speed_at_a_Startup.html">23 nathan marz storm-2010-10-27-Fastest Viable Product: Investing in Speed at a Startup</a></p>
<p>18 0.02608395 <a title="8-tfidf-18" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-02-06-Suffering-oriented_programming.html">33 nathan marz storm-2012-02-06-Suffering-oriented programming</a></p>
<p>19 0.025495484 <a title="8-tfidf-19" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-13-Mimi_Silbert%3A_the_greatest_hacker_in_the_world.html">3 nathan marz storm-2010-01-13-Mimi Silbert: the greatest hacker in the world</a></p>
<p>20 0.025232917 <a title="8-tfidf-20" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-07-Analysis_of_the_%23LessAmbitiousMovies_Twitter_Meme.html">27 nathan marz storm-2011-01-07-Analysis of the #LessAmbitiousMovies Twitter Meme</a></p>
<br/>
<h2>similar blogs computed by <a title="lsi-model" href="../home/nathan_marz_storm_lsi.html">lsi model</a></h2><h3>lsi for this blog:</h3><p>topicId topicWeight</p>
<p>[(0, 0.235), (1, -0.071), (2, 0.845), (3, -0.124), (4, -0.001), (5, -0.064), (6, 0.068), (7, -0.043), (8, 0.029), (9, -0.019), (10, 0.002), (11, -0.033), (12, -0.021), (13, 0.007), (14, 0.007), (15, 0.011), (16, 0.023), (17, -0.003), (18, 0.044), (19, -0.015), (20, 0.005), (21, -0.002), (22, -0.033), (23, -0.016), (24, 0.004), (25, 0.028), (26, 0.004), (27, 0.029), (28, -0.018), (29, -0.018), (30, -0.014), (31, -0.037), (32, 0.012), (33, 0.011), (34, 0.024), (35, 0.0), (36, 0.001), (37, 0.012), (38, -0.032), (39, 0.432), (40, -0.018)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 0.99454713 <a title="8-lsi-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>Introduction: In aprevious post, I developed an equation modeling the stable runtime of an
iterative, batch-oriented workflow. We saw how the equation explained a number
of counter-intuitive behaviors of batch-oriented systems. In this post, we
will learn how to measure the amount of overhead versus dynamic time in a
workflow, which is the first step in applying the theory to optimize a
workflow.Recall that we started with the equation for the runtime of a single
iteration of a workflow:Runtime = Overhead + {Time to process one hour of
data} * {Hours of Data}T = O + P * HWe ended with the equation for the stable
runtime of a workflow that runs repeatedly:{Stable Runtime} = Overhead / (1 -
{Time to process one hour of data}T = O / (1 - P)Measuring O and PThe first
step towards utilizing this theory for optimizing your workflow will be to
measure the values of O and P for your workflow. This can be difficult if the
cluster is shared with lots of other jobs, as the P for each run will vary.
Let's start</p><p>2 0.62369281 <a title="8-lsi-2" href="../nathan_marz_storm-2009/nathan_marz_storm-2009-12-28-The_mathematics_behind_Hadoop-based_systems.html">1 nathan marz storm-2009-12-28-The mathematics behind Hadoop-based systems</a></p>
<p>Introduction: I wish I had known this a year ago. Now, with some simple mathematics I can
finally answer:Why doesn't the speed of my workflow double when I double the
amount of processing power?Why does a 10% failure rate cause my runtime to go
up by 300%?How does optimizing out 30% of my workflow runtime cause the
runtime to decrease by 80%?How many machines should I have in my cluster to be
adequately performant and fault-tolerant?All of these questions are neatly
answered by one simple equation:Runtime = Overhead / (1 - {Time to process one
hour of data})We will derive this equation in a moment. First, let's briefly
discuss what I mean by "Hadoop-based system."1A common use-case of Hadoop is
running a workflow that processes a continuous stream of incoming data. The
workflow runs in a "while(true)" loop, and each iteration of the workflow
processes the data that accumulated since last iteration.The inspiration for
the following analysis can be summarized in a simple example. Let's say you
have a</p><p>3 0.12963063 <a title="8-lsi-3" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>Introduction: The CAP theorem states a database cannot guarantee consistency, availability,
and partition-tolerance at the same time. But you can't sacrifice partition-
tolerance (seehereandhere), so you must make a tradeoff between availability
and consistency. Managing this tradeoff is a central focus of the NoSQL
movement.Consistency means that after you do a successful write, future reads
will always take that write into account. Availability means that you can
always read and write to the system. During a partition, you can only have one
of these properties.Systems that choose consistency over availability have to
deal with some awkward issues. What do you do when the database isn't
available? You can try buffering writes for later, but you risk losing those
writes if you lose the machine with the buffer. Also, buffering writes can be
a form of inconsistency because a client thinks a write has succeeded but the
write isn't in the database yet. Alternatively, you can return errors back to
the cl</p><p>4 0.087691061 <a title="8-lsi-4" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>Introduction: I'm the first employee ofBackType, a Summer '08 YC company. My joining the
company increased the company size by 50%. The experience has been awesome,
but I will say up front that being the first employee of a startup is not for
everyone.The best part of being the first employee of a startup is the total
exposure to all parts of the company. I've learned a ton about product
development, customer development, recruiting, and entrepreneurship.
Additionally, I've met and connected with lots of other awesome people through
the YC network. I've gotten all these benefits at relatively low risk for
myself, as I still have a salary and a solid chunk of equity.No RulesThere are
a lot of rules working at most companies. You don't even realize that some of
the rulesarerules until you work at a company with no rules. I'm talking about
the most basic things like what hours you work, what days of the week you
work, what tools you use, and whether you come into the office or not.Because
there are no</p><p>5 0.081021398 <a title="8-lsi-5" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-08-News_Feed_in_38_lines_of_code_using_Cascalog.html">16 nathan marz storm-2010-05-08-News Feed in 38 lines of code using Cascalog</a></p>
<p>Introduction: In this tutorial forCascalog, we are going to create part of the back-end for
a simplified version of a Facebook-like news feed. In doing so we are going to
walk through an end-to-end example of running Cascalog on a production
cluster. If you're new to Cascalog, you should first look at the introductory
tutorialshereandhere.The code and sample data for the example presented in
this tutorial can be found onGithub.Problem descriptionA news feed ranks
events happening in your social network. Our program will take as input two
sources of data. The first is "follows" relationships which are stored in text
format:nathan bobchris mikemike chrismichelle nathanFollows relationships are
2-tuples of (username, username) with fields separated by whitespace.Our
second source of data is "action" data which is also stored in text
format:nathan status=good 1273094927000nathan birthday 1273026922000david
newjob 1273096922000david travelling 1273094927000bob status=tired
1273026922000dan basketball-cap</p><p>6 0.078378707 <a title="8-lsi-6" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>7 0.077185139 <a title="8-lsi-7" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>8 0.06946519 <a title="8-lsi-8" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-03-Tips_for_Optimizing_Cascading_Flows.html">2 nathan marz storm-2010-01-03-Tips for Optimizing Cascading Flows</a></p>
<p>9 0.059824768 <a title="8-lsi-9" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-13-Mimi_Silbert%3A_the_greatest_hacker_in_the_world.html">3 nathan marz storm-2010-01-13-Mimi Silbert: the greatest hacker in the world</a></p>
<p>10 0.059706461 <a title="8-lsi-10" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-14-Introducing_Cascalog%3A_a_Clojure-based_query_language_for_Hadoop.html">13 nathan marz storm-2010-04-14-Introducing Cascalog: a Clojure-based query language for Hadoop</a></p>
<p>11 0.059277646 <a title="8-lsi-11" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-27-Fastest_Viable_Product%3A_Investing_in_Speed_at_a_Startup.html">23 nathan marz storm-2010-10-27-Fastest Viable Product: Investing in Speed at a Startup</a></p>
<p>12 0.058823776 <a title="8-lsi-12" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-07-Analysis_of_the_%23LessAmbitiousMovies_Twitter_Meme.html">27 nathan marz storm-2011-01-07-Analysis of the #LessAmbitiousMovies Twitter Meme</a></p>
<p>13 0.056908701 <a title="8-lsi-13" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>14 0.052183326 <a title="8-lsi-14" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-08-20-5_Tips_for_Thinking_Under_Uncertainty.html">21 nathan marz storm-2010-08-20-5 Tips for Thinking Under Uncertainty</a></p>
<p>15 0.050332751 <a title="8-lsi-15" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-12-Break_into_Silicon_Valley_with_a_blog.html">38 nathan marz storm-2013-04-12-Break into Silicon Valley with a blog</a></p>
<p>16 0.048563674 <a title="8-lsi-16" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-27-New_Cascalog_features%3A_outer_joins%2C_combiners%2C_sorting%2C_and_more.html">14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</a></p>
<p>17 0.048472043 <a title="8-lsi-17" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>18 0.04706217 <a title="8-lsi-18" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-26-My_conversation_with_the_great_John_McCarthy.html">4 nathan marz storm-2010-01-26-My conversation with the great John McCarthy</a></p>
<p>19 0.046275381 <a title="8-lsi-19" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-01-09-Early_access_edition_of_my_book_is_available.html">32 nathan marz storm-2012-01-09-Early access edition of my book is available</a></p>
<p>20 0.044401575 <a title="8-lsi-20" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-02-06-Suffering-oriented_programming.html">33 nathan marz storm-2012-02-06-Suffering-oriented programming</a></p>
<br/>
<h2>similar blogs computed by <a title="lda-model" href="../home/nathan_marz_storm_lda.html">lda model</a></h2><h3>lda for this blog:</h3><p>topicId topicWeight</p>
<p>[(10, 0.025), (13, 0.017), (28, 0.252), (41, 0.041), (45, 0.158), (48, 0.027), (59, 0.06), (61, 0.012), (72, 0.205), (76, 0.011), (82, 0.042), (88, 0.037)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 0.92904818 <a title="8-lda-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>Introduction: In aprevious post, I developed an equation modeling the stable runtime of an
iterative, batch-oriented workflow. We saw how the equation explained a number
of counter-intuitive behaviors of batch-oriented systems. In this post, we
will learn how to measure the amount of overhead versus dynamic time in a
workflow, which is the first step in applying the theory to optimize a
workflow.Recall that we started with the equation for the runtime of a single
iteration of a workflow:Runtime = Overhead + {Time to process one hour of
data} * {Hours of Data}T = O + P * HWe ended with the equation for the stable
runtime of a workflow that runs repeatedly:{Stable Runtime} = Overhead / (1 -
{Time to process one hour of data}T = O / (1 - P)Measuring O and PThe first
step towards utilizing this theory for optimizing your workflow will be to
measure the values of O and P for your workflow. This can be difficult if the
cluster is shared with lots of other jobs, as the P for each run will vary.
Let's start</p><p>2 0.69163448 <a title="8-lda-2" href="../nathan_marz_storm-2009/nathan_marz_storm-2009-12-28-The_mathematics_behind_Hadoop-based_systems.html">1 nathan marz storm-2009-12-28-The mathematics behind Hadoop-based systems</a></p>
<p>Introduction: I wish I had known this a year ago. Now, with some simple mathematics I can
finally answer:Why doesn't the speed of my workflow double when I double the
amount of processing power?Why does a 10% failure rate cause my runtime to go
up by 300%?How does optimizing out 30% of my workflow runtime cause the
runtime to decrease by 80%?How many machines should I have in my cluster to be
adequately performant and fault-tolerant?All of these questions are neatly
answered by one simple equation:Runtime = Overhead / (1 - {Time to process one
hour of data})We will derive this equation in a moment. First, let's briefly
discuss what I mean by "Hadoop-based system."1A common use-case of Hadoop is
running a workflow that processes a continuous stream of incoming data. The
workflow runs in a "while(true)" loop, and each iteration of the workflow
processes the data that accumulated since last iteration.The inspiration for
the following analysis can be summarized in a simple example. Let's say you
have a</p><p>3 0.20688406 <a title="8-lda-3" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>Introduction: I'm the first employee ofBackType, a Summer '08 YC company. My joining the
company increased the company size by 50%. The experience has been awesome,
but I will say up front that being the first employee of a startup is not for
everyone.The best part of being the first employee of a startup is the total
exposure to all parts of the company. I've learned a ton about product
development, customer development, recruiting, and entrepreneurship.
Additionally, I've met and connected with lots of other awesome people through
the YC network. I've gotten all these benefits at relatively low risk for
myself, as I still have a salary and a solid chunk of equity.No RulesThere are
a lot of rules working at most companies. You don't even realize that some of
the rulesarerules until you work at a company with no rules. I'm talking about
the most basic things like what hours you work, what days of the week you
work, what tools you use, and whether you come into the office or not.Because
there are no</p><p>4 0.20390086 <a title="8-lda-4" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>Introduction: I wasrecently interviewedfor "Programmer Magazine", a Chinese magazine. The
interview was published in Chinese, but a lot of people told me they'd like to
see the English version of the interview. Due to the Google translation being,
ahem, a little iffy, I decided to just publish the original English version on
my blog. Hope you enjoy!What drew you to programming and what was the first
interesting program you wrote?I started programming when I was 10 years old on
my TI-82 graphing calculator. Initially I started programming because I wanted
to make games on my calculator – and also because I was bored in math class
:D. The first interesting game I made on my calculator was an archery game
where you'd shoot arrows at moving targets. You'd get points for hitting more
targets or completing all the targets faster. A couple years later I graduated
to programming the TI-89 which was a huge upgrade in power. I remember how the
TI-82 only let you have 26 variables (for the characters 'a' throu</p><p>5 0.17284228 <a title="8-lda-5" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-10-Fun_with_equality_in_Clojure.html">12 nathan marz storm-2010-04-10-Fun with equality in Clojure</a></p>
<p>Introduction: I ran into some very non-intuitive behavior from Clojure recently. See if you
can guess what "foo" is in the following examples:Example 1:user=> foo1user=>
(= foo 1)trueuser=> (= [foo 2] [1 2])trueuser=> (= {foo 2} {1 2})falseExample
2:user=> foofalseuser=> (= foo false)trueuser=> (when foo (println "shouldn't
print?"))shouldn't print?nilYikes, huh? Here are the answers:Example 1: (def
foo (Long. "1"))Example 2: (def foo (Boolean. false))For example 1, the map
equality breaks down because Long and Integer have different hashcodes for the
same numeric value. In example 2, Clojure considers anything besides false or
nil to be true in a conditional, so that means a false Boolean object will be
true in a conditional even though it's equal to "false".I would definitely
consider #1 a bug, as part of the contract of equality is that two equal
objects have the same hashcode. #2 is more debatable, but it seems more
intuitive that the Boolean object false be considered false in conditionals as
w</p><p>6 0.14646226 <a title="8-lda-6" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-27-Fastest_Viable_Product%3A_Investing_in_Speed_at_a_Startup.html">23 nathan marz storm-2010-10-27-Fastest Viable Product: Investing in Speed at a Startup</a></p>
<p>7 0.14451584 <a title="8-lda-7" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-05-How_to_get_a_job_at_a_kick-ass_startup_%28for_programmers%29.html">22 nathan marz storm-2010-10-05-How to get a job at a kick-ass startup (for programmers)</a></p>
<p>8 0.13621056 <a title="8-lda-8" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>9 0.13286687 <a title="8-lda-9" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>10 0.13028997 <a title="8-lda-10" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-06-16-Your_company_has_a_knowledge_debt_problem.html">18 nathan marz storm-2010-06-16-Your company has a knowledge debt problem</a></p>
<p>11 0.1242857 <a title="8-lda-11" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-08-20-5_Tips_for_Thinking_Under_Uncertainty.html">21 nathan marz storm-2010-08-20-5 Tips for Thinking Under Uncertainty</a></p>
<p>12 0.12015543 <a title="8-lda-12" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-02-21-Why_so_many_research_papers_are_so_hard_to_understand.html">6 nathan marz storm-2010-02-21-Why so many research papers are so hard to understand</a></p>
<p>13 0.11474758 <a title="8-lda-13" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-30-You_should_blog_even_if_you_have_no_readers.html">20 nathan marz storm-2010-07-30-You should blog even if you have no readers</a></p>
<p>14 0.11428587 <a title="8-lda-14" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-12-06-You_Are_a_Product.html">25 nathan marz storm-2010-12-06-You Are a Product</a></p>
<p>15 0.11418475 <a title="8-lda-15" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>16 0.10800179 <a title="8-lda-16" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-24-The_inexplicable_rise_of_open_floor_plans_in_tech_companies.html">40 nathan marz storm-2014-02-24-The inexplicable rise of open floor plans in tech companies</a></p>
<p>17 0.1072289 <a title="8-lda-17" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>18 0.10442495 <a title="8-lda-18" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-04-Introducing_%22Nanny%22_-_a_really_simple_dependency_management_tool.html">7 nathan marz storm-2010-03-04-Introducing "Nanny" - a really simple dependency management tool</a></p>
<p>19 0.10405827 <a title="8-lda-19" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-03-29-My_talks_at_POSSCON.html">30 nathan marz storm-2011-03-29-My talks at POSSCON</a></p>
<p>20 0.10305528 <a title="8-lda-20" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-13-Mimi_Silbert%3A_the_greatest_hacker_in_the_world.html">3 nathan marz storm-2010-01-13-Mimi Silbert: the greatest hacker in the world</a></p>
<br/><br/><br/>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-48522588-1', 'makerhacker.github.io');
ga('send', 'pageview');
</script>

</body>
</html>
