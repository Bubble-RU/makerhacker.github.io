<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<title>14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</title>
</head>

<body>
<p><a title="nathan_marz_storm" href="../nathan_marz_storm_home.html">nathan_marz_storm</a> <a title="nathan_marz_storm-2010" href="../home/nathan_marz_storm-2010_home.html">nathan_marz_storm-2010</a> <a title="nathan_marz_storm-2010-14" href="#">nathan_marz_storm-2010-14</a> knowledge-graph by maker-knowledge-mining</p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- maker adsense -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-5027806277543591"
     data-ad-slot="4192012269"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</h1>
<br/><h2>meta infos for this blog</h2><p>Source: <a title="nathan_marz_storm-2010-14-html" href="http://nathanmarz.com//blog/new-cascalog-features-outer-joins-combiners-sorting-and-more.html">html</a></p><p>Introduction: In thefirst tutorialforCascalog, I showed off many of Cascalog's powerful
features: joins, aggregates, subqueries, custom operations, and more. Since
Cascalog's release a couple weeks ago, I've added a number of new features to
Cascalog that seriously increase the expressiveness and performance of the
language without compromising its simplicity or flexibility.Like the first
tutorial, go ahead and load up the playground by issuing the following
commands:lein compile-java && lein compilelein repluser=> (use
'cascalog.playground) (bootstrap)moreOuter joinsAs we saw in the first
tutorial, you can join together multiple sources of data in Cascalog by using
the same variable name in multiple sources of data. For example, given "age"
and "gender" sources, we can get the age and gender for each person by
running:user=> (?<\- (stdout) [?person ?age ?gender](age ?person ?age) (gender
?person ?gender))This is aninner join. We will only have results for people
that appear in both sets of data. We</p><br/>
<h2>similar blogs computed by tfidf model</h2><h3>tfidf for this blog:</h3><p>wordName wordTfidf (topN-words)</p>
<p>[('stdout', 0.322), ('age', 0.296), ('person', 0.262), ('user', 0.23), ('follows', 0.222), ('cascalog', 0.222), ('predicate', 0.207), ('count', 0.202), ('aggregators', 0.186), ('gender', 0.164), ('combiners', 0.163), ('ungrounding', 0.163), ('youngest', 0.163), ('tuples', 0.152), ('sum', 0.138), ('parallel', 0.133), ('query', 0.123), ('aggregator', 0.115), ('aggregation', 0.106), ('outer', 0.106)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 1.000001 <a title="14-tfidf-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-27-New_Cascalog_features%3A_outer_joins%2C_combiners%2C_sorting%2C_and_more.html">14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</a></p>
<p>Introduction: In thefirst tutorialforCascalog, I showed off many of Cascalog's powerful
features: joins, aggregates, subqueries, custom operations, and more. Since
Cascalog's release a couple weeks ago, I've added a number of new features to
Cascalog that seriously increase the expressiveness and performance of the
language without compromising its simplicity or flexibility.Like the first
tutorial, go ahead and load up the playground by issuing the following
commands:lein compile-java && lein compilelein repluser=> (use
'cascalog.playground) (bootstrap)moreOuter joinsAs we saw in the first
tutorial, you can join together multiple sources of data in Cascalog by using
the same variable name in multiple sources of data. For example, given "age"
and "gender" sources, we can get the age and gender for each person by
running:user=> (?<\- (stdout) [?person ?age ?gender](age ?person ?age) (gender
?person ?gender))This is aninner join. We will only have results for people
that appear in both sets of data. We</p><p>2 0.64353138 <a title="14-tfidf-2" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-14-Introducing_Cascalog%3A_a_Clojure-based_query_language_for_Hadoop.html">13 nathan marz storm-2010-04-14-Introducing Cascalog: a Clojure-based query language for Hadoop</a></p>
<p>Introduction: I'm very excited to be releasingCascalogas open-source today. Cascalog is a
Clojure-based query language for Hadoop inspired byDatalog.HighlightsSimple-
Functions, filters, and aggregators all use the same syntax. Joins are
implicit and natural.Expressive- Logical composition is very powerful, and you
can run arbitrary Clojure code in your query with little effort.Interactive-
Run queries from the Clojure REPL.Scalable- Cascalog queries run as a series
of MapReduce jobs.Query anything- Query HDFS data, database data, and/or local
data by making use of Cascading's "Tap" abstractionCareful handling of null
values- Null values can make life difficult. Cascalog has a feature called
"non-nullable variables" that makes dealing with nulls painless.First class
interoperability with Cascading- Operations defined for Cascalog can be used
in a Cascading flow and vice-versaFirst class interoperability with Clojure-
Can use regular Clojure functions as operations or filters, and since Cascalog
is a</p><p>3 0.17352238 <a title="14-tfidf-3" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-08-News_Feed_in_38_lines_of_code_using_Cascalog.html">16 nathan marz storm-2010-05-08-News Feed in 38 lines of code using Cascalog</a></p>
<p>Introduction: In this tutorial forCascalog, we are going to create part of the back-end for
a simplified version of a Facebook-like news feed. In doing so we are going to
walk through an end-to-end example of running Cascalog on a production
cluster. If you're new to Cascalog, you should first look at the introductory
tutorialshereandhere.The code and sample data for the example presented in
this tutorial can be found onGithub.Problem descriptionA news feed ranks
events happening in your social network. Our program will take as input two
sources of data. The first is "follows" relationships which are stored in text
format:nathan bobchris mikemike chrismichelle nathanFollows relationships are
2-tuples of (username, username) with fields separated by whitespace.Our
second source of data is "action" data which is also stored in text
format:nathan status=good 1273094927000nathan birthday 1273026922000david
newjob 1273096922000david travelling 1273094927000bob status=tired
1273026922000dan basketball-cap</p><p>4 0.15300345 <a title="14-tfidf-4" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-03-Tips_for_Optimizing_Cascading_Flows.html">2 nathan marz storm-2010-01-03-Tips for Optimizing Cascading Flows</a></p>
<p>Introduction: Here's a few tips for optimizing your Cascading flows. I also recommend
checking out"7 Tips for Improving MapReduce Performance"for general MapReduce
optimization tips.1. Filter data as early as possibleLess data equals less
work. Sometimes you can easily filter data out early by moving filters earlier
in your flow. Other times, it can be more complicated.One important use case
that can be heavily optimized is querying a set of records for matches against
a large set of keys - also known as abatch query. You can read more about the
mechanics of batch querieshere. You can find the source code for batch
queryinghere. The implementation utilizes a bloom filter to filter data out of
the flow before using a join to complete the logic for the query.Another wide-
range of use cases involves keeping data in memory within each task for
querying. For example, let's say you have a bunch of key-value pairs in HDFS,
and you want all the pairs where the keydoes notbelong in a separate list of
30,000</p><p>5 0.14952071 <a title="14-tfidf-5" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-07-Cascalog_Presentation_at_Bay_Area_Clojure_User_Group.html">15 nathan marz storm-2010-05-07-Cascalog Presentation at Bay Area Clojure User Group</a></p>
<p>Introduction: Here are the slides from my presentation about Cascalog at the Bay Area
Clojure User Group last night:</p><p>6 0.14204553 <a title="14-tfidf-6" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-11-Cascalog_workshop.html">28 nathan marz storm-2011-01-11-Cascalog workshop</a></p>
<p>7 0.12261044 <a title="14-tfidf-7" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>8 0.068816535 <a title="14-tfidf-8" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>9 0.064626597 <a title="14-tfidf-9" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-10-Fun_with_equality_in_Clojure.html">12 nathan marz storm-2010-04-10-Fun with equality in Clojure</a></p>
<p>10 0.047450662 <a title="14-tfidf-10" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>11 0.045761917 <a title="14-tfidf-11" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-02-06-Suffering-oriented_programming.html">33 nathan marz storm-2012-02-06-Suffering-oriented programming</a></p>
<p>12 0.043441106 <a title="14-tfidf-12" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>13 0.042994723 <a title="14-tfidf-13" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-08-20-5_Tips_for_Thinking_Under_Uncertainty.html">21 nathan marz storm-2010-08-20-5 Tips for Thinking Under Uncertainty</a></p>
<p>14 0.035797864 <a title="14-tfidf-14" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>15 0.0329597 <a title="14-tfidf-15" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>16 0.031255979 <a title="14-tfidf-16" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>17 0.03040562 <a title="14-tfidf-17" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-30-You_should_blog_even_if_you_have_no_readers.html">20 nathan marz storm-2010-07-30-You should blog even if you have no readers</a></p>
<p>18 0.028265022 <a title="14-tfidf-18" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-12-Break_into_Silicon_Valley_with_a_blog.html">38 nathan marz storm-2013-04-12-Break into Silicon Valley with a blog</a></p>
<p>19 0.026913418 <a title="14-tfidf-19" href="../nathan_marz_storm-2009/nathan_marz_storm-2009-12-28-The_mathematics_behind_Hadoop-based_systems.html">1 nathan marz storm-2009-12-28-The mathematics behind Hadoop-based systems</a></p>
<p>20 0.026588937 <a title="14-tfidf-20" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-24-The_inexplicable_rise_of_open_floor_plans_in_tech_companies.html">40 nathan marz storm-2014-02-24-The inexplicable rise of open floor plans in tech companies</a></p>
<br/>
<h2>similar blogs computed by <a title="lsi-model" href="../home/nathan_marz_storm_lsi.html">lsi model</a></h2><h3>lsi for this blog:</h3><p>topicId topicWeight</p>
<p>[(0, 0.332), (1, -0.727), (2, -0.154), (3, -0.111), (4, -0.044), (5, 0.005), (6, 0.022), (7, -0.026), (8, 0.049), (9, 0.003), (10, -0.025), (11, 0.017), (12, -0.051), (13, 0.071), (14, 0.022), (15, -0.018), (16, -0.005), (17, 0.068), (18, 0.209), (19, -0.027), (20, -0.023), (21, -0.07), (22, -0.03), (23, -0.009), (24, 0.055), (25, -0.05), (26, -0.072), (27, 0.243), (28, 0.082), (29, 0.071), (30, -0.069), (31, -0.029), (32, 0.005), (33, 0.049), (34, 0.017), (35, 0.005), (36, -0.041), (37, 0.009), (38, 0.028), (39, -0.023), (40, -0.402)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 0.99241471 <a title="14-lsi-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-27-New_Cascalog_features%3A_outer_joins%2C_combiners%2C_sorting%2C_and_more.html">14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</a></p>
<p>Introduction: In thefirst tutorialforCascalog, I showed off many of Cascalog's powerful
features: joins, aggregates, subqueries, custom operations, and more. Since
Cascalog's release a couple weeks ago, I've added a number of new features to
Cascalog that seriously increase the expressiveness and performance of the
language without compromising its simplicity or flexibility.Like the first
tutorial, go ahead and load up the playground by issuing the following
commands:lein compile-java && lein compilelein repluser=> (use
'cascalog.playground) (bootstrap)moreOuter joinsAs we saw in the first
tutorial, you can join together multiple sources of data in Cascalog by using
the same variable name in multiple sources of data. For example, given "age"
and "gender" sources, we can get the age and gender for each person by
running:user=> (?<\- (stdout) [?person ?age ?gender](age ?person ?age) (gender
?person ?gender))This is aninner join. We will only have results for people
that appear in both sets of data. We</p><p>2 0.67548144 <a title="14-lsi-2" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-14-Introducing_Cascalog%3A_a_Clojure-based_query_language_for_Hadoop.html">13 nathan marz storm-2010-04-14-Introducing Cascalog: a Clojure-based query language for Hadoop</a></p>
<p>Introduction: I'm very excited to be releasingCascalogas open-source today. Cascalog is a
Clojure-based query language for Hadoop inspired byDatalog.HighlightsSimple-
Functions, filters, and aggregators all use the same syntax. Joins are
implicit and natural.Expressive- Logical composition is very powerful, and you
can run arbitrary Clojure code in your query with little effort.Interactive-
Run queries from the Clojure REPL.Scalable- Cascalog queries run as a series
of MapReduce jobs.Query anything- Query HDFS data, database data, and/or local
data by making use of Cascading's "Tap" abstractionCareful handling of null
values- Null values can make life difficult. Cascalog has a feature called
"non-nullable variables" that makes dealing with nulls painless.First class
interoperability with Cascading- Operations defined for Cascalog can be used
in a Cascading flow and vice-versaFirst class interoperability with Clojure-
Can use regular Clojure functions as operations or filters, and since Cascalog
is a</p><p>3 0.24501231 <a title="14-lsi-3" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-08-News_Feed_in_38_lines_of_code_using_Cascalog.html">16 nathan marz storm-2010-05-08-News Feed in 38 lines of code using Cascalog</a></p>
<p>Introduction: In this tutorial forCascalog, we are going to create part of the back-end for
a simplified version of a Facebook-like news feed. In doing so we are going to
walk through an end-to-end example of running Cascalog on a production
cluster. If you're new to Cascalog, you should first look at the introductory
tutorialshereandhere.The code and sample data for the example presented in
this tutorial can be found onGithub.Problem descriptionA news feed ranks
events happening in your social network. Our program will take as input two
sources of data. The first is "follows" relationships which are stored in text
format:nathan bobchris mikemike chrismichelle nathanFollows relationships are
2-tuples of (username, username) with fields separated by whitespace.Our
second source of data is "action" data which is also stored in text
format:nathan status=good 1273094927000nathan birthday 1273026922000david
newjob 1273096922000david travelling 1273094927000bob status=tired
1273026922000dan basketball-cap</p><p>4 0.20224425 <a title="14-lsi-4" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-03-Tips_for_Optimizing_Cascading_Flows.html">2 nathan marz storm-2010-01-03-Tips for Optimizing Cascading Flows</a></p>
<p>Introduction: Here's a few tips for optimizing your Cascading flows. I also recommend
checking out"7 Tips for Improving MapReduce Performance"for general MapReduce
optimization tips.1. Filter data as early as possibleLess data equals less
work. Sometimes you can easily filter data out early by moving filters earlier
in your flow. Other times, it can be more complicated.One important use case
that can be heavily optimized is querying a set of records for matches against
a large set of keys - also known as abatch query. You can read more about the
mechanics of batch querieshere. You can find the source code for batch
queryinghere. The implementation utilizes a bloom filter to filter data out of
the flow before using a join to complete the logic for the query.Another wide-
range of use cases involves keeping data in memory within each task for
querying. For example, let's say you have a bunch of key-value pairs in HDFS,
and you want all the pairs where the keydoes notbelong in a separate list of
30,000</p><p>5 0.19767882 <a title="14-lsi-5" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>Introduction: There are a lot of misconceptions about what Hadoop is useful for and what
kind of data you can put in it. A lot of people think that Hadoop is meant for
unstructured data like log files. While Hadoop is great for log files, it's
alsofantasticfor strongly typed, structured data.In this post I'll discuss how
you can use a tool likeThriftto store strongly typed data in Hadoop while
retaining the flexibility to evolve your schema. We'll look at graph-based
schemas and see why they are an ideal fit for many Hadoop-based
applications.OK, so what kind of "structured" data can you put in
Hadoop?Anything! AtBackTypewe put data about news, conversations, and people
into Hadoop as structured objects. You can easily push structured information
about social graphs, financial information, or anything you want into Hadoop.
That sounds all well and good, but why not just use JSON as the data
format?JSON doesn't give you a real schema and doesn't protect against data
inconsistency. For example, if you</p><p>6 0.16918907 <a title="14-lsi-6" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-07-Cascalog_Presentation_at_Bay_Area_Clojure_User_Group.html">15 nathan marz storm-2010-05-07-Cascalog Presentation at Bay Area Clojure User Group</a></p>
<p>7 0.16429493 <a title="14-lsi-7" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-11-Cascalog_workshop.html">28 nathan marz storm-2011-01-11-Cascalog workshop</a></p>
<p>8 0.10691191 <a title="14-lsi-8" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-10-Fun_with_equality_in_Clojure.html">12 nathan marz storm-2010-04-10-Fun with equality in Clojure</a></p>
<p>9 0.089789294 <a title="14-lsi-9" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>10 0.073539764 <a title="14-lsi-10" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>11 0.072574645 <a title="14-lsi-11" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-08-20-5_Tips_for_Thinking_Under_Uncertainty.html">21 nathan marz storm-2010-08-20-5 Tips for Thinking Under Uncertainty</a></p>
<p>12 0.065717161 <a title="14-lsi-12" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>13 0.065658808 <a title="14-lsi-13" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-02-06-Suffering-oriented_programming.html">33 nathan marz storm-2012-02-06-Suffering-oriented programming</a></p>
<p>14 0.060670283 <a title="14-lsi-14" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-24-The_inexplicable_rise_of_open_floor_plans_in_tech_companies.html">40 nathan marz storm-2014-02-24-The inexplicable rise of open floor plans in tech companies</a></p>
<p>15 0.059890352 <a title="14-lsi-15" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>16 0.058169991 <a title="14-lsi-16" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>17 0.053169765 <a title="14-lsi-17" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>18 0.051058125 <a title="14-lsi-18" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-13-Mimi_Silbert%3A_the_greatest_hacker_in_the_world.html">3 nathan marz storm-2010-01-13-Mimi Silbert: the greatest hacker in the world</a></p>
<p>19 0.051043082 <a title="14-lsi-19" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-07-Analysis_of_the_%23LessAmbitiousMovies_Twitter_Meme.html">27 nathan marz storm-2011-01-07-Analysis of the #LessAmbitiousMovies Twitter Meme</a></p>
<p>20 0.049080819 <a title="14-lsi-20" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-12-Break_into_Silicon_Valley_with_a_blog.html">38 nathan marz storm-2013-04-12-Break into Silicon Valley with a blog</a></p>
<br/>
<h2>similar blogs computed by <a title="lda-model" href="../home/nathan_marz_storm_lda.html">lda model</a></h2><h3>lda for this blog:</h3><p>topicId topicWeight</p>
<p>[(0, 0.013), (5, 0.018), (10, 0.013), (26, 0.014), (33, 0.053), (41, 0.025), (59, 0.065), (68, 0.032), (76, 0.01), (78, 0.644), (88, 0.014)]</p>
<h3>similar blogs list:</h3><p>simIndex simValue blogId blogTitle</p>
<p>same-blog 1 0.99402905 <a title="14-lda-1" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-27-New_Cascalog_features%3A_outer_joins%2C_combiners%2C_sorting%2C_and_more.html">14 nathan marz storm-2010-04-27-New Cascalog features: outer joins, combiners, sorting, and more</a></p>
<p>Introduction: In thefirst tutorialforCascalog, I showed off many of Cascalog's powerful
features: joins, aggregates, subqueries, custom operations, and more. Since
Cascalog's release a couple weeks ago, I've added a number of new features to
Cascalog that seriously increase the expressiveness and performance of the
language without compromising its simplicity or flexibility.Like the first
tutorial, go ahead and load up the playground by issuing the following
commands:lein compile-java && lein compilelein repluser=> (use
'cascalog.playground) (bootstrap)moreOuter joinsAs we saw in the first
tutorial, you can join together multiple sources of data in Cascalog by using
the same variable name in multiple sources of data. For example, given "age"
and "gender" sources, we can get the age and gender for each person by
running:user=> (?<\- (stdout) [?person ?age ?gender](age ?person ?age) (gender
?person ?gender))This is aninner join. We will only have results for people
that appear in both sets of data. We</p><p>2 0.8682918 <a title="14-lda-2" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-14-Introducing_Cascalog%3A_a_Clojure-based_query_language_for_Hadoop.html">13 nathan marz storm-2010-04-14-Introducing Cascalog: a Clojure-based query language for Hadoop</a></p>
<p>Introduction: I'm very excited to be releasingCascalogas open-source today. Cascalog is a
Clojure-based query language for Hadoop inspired byDatalog.HighlightsSimple-
Functions, filters, and aggregators all use the same syntax. Joins are
implicit and natural.Expressive- Logical composition is very powerful, and you
can run arbitrary Clojure code in your query with little effort.Interactive-
Run queries from the Clojure REPL.Scalable- Cascalog queries run as a series
of MapReduce jobs.Query anything- Query HDFS data, database data, and/or local
data by making use of Cascading's "Tap" abstractionCareful handling of null
values- Null values can make life difficult. Cascalog has a feature called
"non-nullable variables" that makes dealing with nulls painless.First class
interoperability with Cascading- Operations defined for Cascalog can be used
in a Cascading flow and vice-versaFirst class interoperability with Clojure-
Can use regular Clojure functions as operations or filters, and since Cascalog
is a</p><p>3 0.28696847 <a title="14-lda-3" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-10-Thrift_%2B_Graphs_%3D_Strong%2C_flexible_schemas_on_Hadoop.html">9 nathan marz storm-2010-03-10-Thrift + Graphs = Strong, flexible schemas on Hadoop</a></p>
<p>Introduction: There are a lot of misconceptions about what Hadoop is useful for and what
kind of data you can put in it. A lot of people think that Hadoop is meant for
unstructured data like log files. While Hadoop is great for log files, it's
alsofantasticfor strongly typed, structured data.In this post I'll discuss how
you can use a tool likeThriftto store strongly typed data in Hadoop while
retaining the flexibility to evolve your schema. We'll look at graph-based
schemas and see why they are an ideal fit for many Hadoop-based
applications.OK, so what kind of "structured" data can you put in
Hadoop?Anything! AtBackTypewe put data about news, conversations, and people
into Hadoop as structured objects. You can easily push structured information
about social graphs, financial information, or anything you want into Hadoop.
That sounds all well and good, but why not just use JSON as the data
format?JSON doesn't give you a real schema and doesn't protect against data
inconsistency. For example, if you</p><p>4 0.25752431 <a title="14-lda-4" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-05-08-News_Feed_in_38_lines_of_code_using_Cascalog.html">16 nathan marz storm-2010-05-08-News Feed in 38 lines of code using Cascalog</a></p>
<p>Introduction: In this tutorial forCascalog, we are going to create part of the back-end for
a simplified version of a Facebook-like news feed. In doing so we are going to
walk through an end-to-end example of running Cascalog on a production
cluster. If you're new to Cascalog, you should first look at the introductory
tutorialshereandhere.The code and sample data for the example presented in
this tutorial can be found onGithub.Problem descriptionA news feed ranks
events happening in your social network. Our program will take as input two
sources of data. The first is "follows" relationships which are stored in text
format:nathan bobchris mikemike chrismichelle nathanFollows relationships are
2-tuples of (username, username) with fields separated by whitespace.Our
second source of data is "action" data which is also stored in text
format:nathan status=good 1273094927000nathan birthday 1273026922000david
newjob 1273096922000david travelling 1273094927000bob status=tired
1273026922000dan basketball-cap</p><p>5 0.18312904 <a title="14-lda-5" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-01-03-Tips_for_Optimizing_Cascading_Flows.html">2 nathan marz storm-2010-01-03-Tips for Optimizing Cascading Flows</a></p>
<p>Introduction: Here's a few tips for optimizing your Cascading flows. I also recommend
checking out"7 Tips for Improving MapReduce Performance"for general MapReduce
optimization tips.1. Filter data as early as possibleLess data equals less
work. Sometimes you can easily filter data out early by moving filters earlier
in your flow. Other times, it can be more complicated.One important use case
that can be heavily optimized is querying a set of records for matches against
a large set of keys - also known as abatch query. You can read more about the
mechanics of batch querieshere. You can find the source code for batch
queryinghere. The implementation utilizes a bloom filter to filter data out of
the flow before using a join to complete the logic for the query.Another wide-
range of use cases involves keeping data in memory within each task for
querying. For example, let's say you have a bunch of key-value pairs in HDFS,
and you want all the pairs where the keydoes notbelong in a separate list of
30,000</p><p>6 0.14600034 <a title="14-lda-6" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-04-10-Fun_with_equality_in_Clojure.html">12 nathan marz storm-2010-04-10-Fun with equality in Clojure</a></p>
<p>7 0.11414718 <a title="14-lda-7" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-07-12-My_experience_as_the_first_employee_of_a_Y_Combinator_startup.html">19 nathan marz storm-2010-07-12-My experience as the first employee of a Y Combinator startup</a></p>
<p>8 0.10569354 <a title="14-lda-8" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-10-13-How_to_beat_the_CAP_theorem.html">31 nathan marz storm-2011-10-13-How to beat the CAP theorem</a></p>
<p>9 0.10502411 <a title="14-lda-9" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-24-The_inexplicable_rise_of_open_floor_plans_in_tech_companies.html">40 nathan marz storm-2014-02-24-The inexplicable rise of open floor plans in tech companies</a></p>
<p>10 0.086470231 <a title="14-lda-10" href="../nathan_marz_storm-2009/nathan_marz_storm-2009-12-28-The_mathematics_behind_Hadoop-based_systems.html">1 nathan marz storm-2009-12-28-The mathematics behind Hadoop-based systems</a></p>
<p>11 0.080960579 <a title="14-lda-11" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-02-Principles_of_Software_Engineering%2C_Part_1.html">37 nathan marz storm-2013-04-02-Principles of Software Engineering, Part 1</a></p>
<p>12 0.076079756 <a title="14-lda-12" href="../nathan_marz_storm-2012/nathan_marz_storm-2012-02-06-Suffering-oriented_programming.html">33 nathan marz storm-2012-02-06-Suffering-oriented programming</a></p>
<p>13 0.070416562 <a title="14-lda-13" href="../nathan_marz_storm-2014/nathan_marz_storm-2014-02-12-Interview_with_%22Programmer_Magazine%22.html">39 nathan marz storm-2014-02-12-Interview with "Programmer Magazine"</a></p>
<p>14 0.067244165 <a title="14-lda-14" href="../nathan_marz_storm-2013/nathan_marz_storm-2013-04-01-My_new_startup.html">36 nathan marz storm-2013-04-01-My new startup</a></p>
<p>15 0.063500971 <a title="14-lda-15" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-03-08-Follow-up_to_%22The_mathematics_behind_Hadoop-based_systems%22.html">8 nathan marz storm-2010-03-08-Follow-up to "The mathematics behind Hadoop-based systems"</a></p>
<p>16 0.060244199 <a title="14-lda-16" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-06-16-Your_company_has_a_knowledge_debt_problem.html">18 nathan marz storm-2010-06-16-Your company has a knowledge debt problem</a></p>
<p>17 0.058302362 <a title="14-lda-17" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-12-06-You_Are_a_Product.html">25 nathan marz storm-2010-12-06-You Are a Product</a></p>
<p>18 0.057707284 <a title="14-lda-18" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-05-How_to_get_a_job_at_a_kick-ass_startup_%28for_programmers%29.html">22 nathan marz storm-2010-10-05-How to get a job at a kick-ass startup (for programmers)</a></p>
<p>19 0.057622131 <a title="14-lda-19" href="../nathan_marz_storm-2010/nathan_marz_storm-2010-10-27-Fastest_Viable_Product%3A_Investing_in_Speed_at_a_Startup.html">23 nathan marz storm-2010-10-27-Fastest Viable Product: Investing in Speed at a Startup</a></p>
<p>20 0.054736286 <a title="14-lda-20" href="../nathan_marz_storm-2011/nathan_marz_storm-2011-01-07-Analysis_of_the_%23LessAmbitiousMovies_Twitter_Meme.html">27 nathan marz storm-2011-01-07-Analysis of the #LessAmbitiousMovies Twitter Meme</a></p>
<br/><br/><br/>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-48522588-1', 'makerhacker.github.io');
ga('send', 'pageview');
</script>

</body>
</html>
